### 1. 如何确定sql需要优化

+ 执行时长
+ 消耗资源
+ 分析查询计划，查看是否存在性能瓶颈

### 2. sql查询性能下降的常见原因

+ 没有合适的索引
+ 使用通配符开头的查询
+ 复杂的子查询
+ where中使用函数
+ 返回的数据量过大
+ 服务器资源限制

### 3. 什么是索引，索引是如何优化查询的

+ 索引是一种数据结构，用于加快数据表中数据的检索速度。
+ 在列上建索引，提高查询效率
+ 索引优化sql查询的方式是通过快速定位到需要的数据行，减少全表扫描

### 4. 什么是查询计划

+ mysql：explain
+ oracle：
    + explain plan for 查询;
    + SELECT * FROM TABLE(DBMS_XPLAN.DISPLAY);

### 5. 如何优化有多个表连接的sql查询

+ 确保每个连接上都有适当的索引
+ 使用合适的连接类型 inner join，left join
+ 减少连接表的数量
+ 优化where子句中的条件，尽量减少连接表的结果集

### 6. 什么是索引覆盖

+ 可以从索引中直接获取所需的数据，无需访问表。
+ 减少了对表的访问次数，加快了查询速度

### 7. 如何确定哪些列需要索引

+ 经常被查询的列
+ 经常被用于连接的列
+ 在where子句中用于过滤数据的列
+ 经常用于排序或分组的列
+ 考虑查询和数据的更新频率，权衡是否建立索引

### 8. 聚集索引和非聚集索引

+ 聚集索引
    + 一种索引结构，索引的顺序和数据存储的顺序相同
    + 在聚集索引中，数据行按照索引的顺序存储在表中
    + 每个表只能由一个聚集索引，通常是主键索引
+ 非聚集索引
    + 独立于数据存储顺序的索引结构
    + 在非聚集索引中，索引条目包含实际数据行的的指针
    + 一个表可以有多个非聚集索引

+ 区别
    + 聚集索引中，索引和数据存储在一起，非聚集索引中，索引和数据存储分开
    + 聚集索引中的叶子节点存储了数据行，非聚集索引的叶子节点存储了指向数据行的指针
    + 聚集索引用于主键或唯一约束，非聚集索引用于任意列

|      | 聚集索引     | 非聚集索引      |
|------|----------|------------|
| 存储   | 索引数据存在一起 | 分开存储       |
| 叶子节点 | 存储数据行    | 存储指向数据行的指针 |
| 用处   | 主键或唯一约束  | 任意列        |

### 9. 如何处理频繁更新的数据库表的性能问题
+ 确保更新的列没有过多的索引，以减少更新操作的开销
+ 批量更新

### 如何选择合适的索引

+ 选择合适的索引需要考虑查询频率、查询条件的选择以及表的大小等因素
+ 通常在where、join、order by子句的列上创建索引


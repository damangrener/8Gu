### 什么是读写分离？
为了把对数据库的读写操作分散到不同的数据库节点上，可以小幅提升写性能，大幅提升读性能

一般情况下，会选择一主多从，主库负责写，从库负责读。主库从库之间会进行数据同步，保证从库数据的准确性。

### 如何实现读写分离？
1. 部署多台数据库，选择其中一台作为主数据库，其他的作为从数据库。
2. 保证主从数据是实时同步的，也就是主从复制。
3. 系统将写请求交给主数据库处理，读请求交给从数据库处理。

#### 常用方式
1. 代理模式：
   + 在应用和数据之间加一个代理层，程序所有的数据请求交给代理层，代理层负责分离读写请求，路由到对应的数据库中。
     + 中间件：
       + Mysql Router，MySQL8.2之后，router能自动分辨对数据库读写，并路由到正确的实例上，无需在应用程序中进行任何更改
       + atlas
       + mycat
2. 组件方式（互联网公司常用）
   + sharding-jdbc

### 主从复制原理
binlog 记录了MySQL数据库中数据的所有变化（DDL，DML），因此根据binlog就能将主库的数据同步到从库
1. 主库开启binlog
2. 主库将数据库中的变化写入binlog
3. 从库连接主库
4. 从库创建一个IO线程想主库请求更新的binlog
5. 主库创建一个binlog dump线程发送binlog，从库的IO线程负责接收
6. 从库的IO线程将接收的binlog写入到relaylog
7. 从库的sql线程读取relaylog同步数据到本地

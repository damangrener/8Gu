### TCP/IP四层模型

+ 应用层
+ 传输层
+ 网络层
+ 网络接口层

#### 应用层

+ 位于传输层之上，为两个终端设备上的应用程序之间提供信息交换的服务
+ 定义了信息交换的格式
+ 应用层交互的数据单元称为报文

应用层协议定义了网络通信规则，不同的网络应用需要不同的协议

+ HTTP web应用
+ SMTP 简单邮件发送协议
+ POP3/IMAP 邮件接收协议
+ FTP/SFTP 文件传输
+ Telnet 远程登录
+ SSH 安全的网络传输
+ RTP 实时传输
+ DNS 域名管理系统

#### 传输层

+ 负责向两台终端设备进程之间的通信提供通用的数据传输服务
+ 传送应用层报文

常见协议

+ TCP 传输控制协议
    + 面向连接的，可靠的数据传输协议
+ UDP 用户数据协议
    + 无连接的，不保证数据传输的可靠性，简单高效

#### 网络层

+ 负责为分组交换网上的不同主机提供通信服务
+ 在发送数据时，网络层把运输层产生的报文段或用户数据报
  封装成分组和包进行传送
+ 选择合适的路由，使源主机运输层传下来的分组，能通过网络层中的路由去找到目的主机

网络层常见协议

+ IP 网际协议
    + 定义数据包的格式，对数据包进行路由和寻址
+ ARP
+ ICMP
+ NAT
+ OSPF
+ RIP
+ BGP

#### 网络接口层

+ 数据链路层和物理层的合体
+ 两台主机之间的数据传输，总是一段一段的在链路上传送
+ 作用是将网络层传输的IP数据报组装成帧，在两个相邻节点间的链路上传送帧。
+ 物理层的作用是实现相邻计算机节点之间比特流的透明传送，尽可能地屏蔽掉传输介质和物理设备的差异

重要功能和技术

+ 差错检测技术
+ 多路访问协议
+ MAC协议
+ 以太网技术
+ CSMA/CD协议

### HTTP

#### 从输入URL到页面展示发生了什么？

1. 输入URL
2. 浏览器通过DNS获取域名对应的IP
3. 浏览器根据IP和端口，像目标服务器发起一个TCP连接请求
4. 浏览器在TCP连接上，向服务器发送一个HTTP报文，请求网页的内容
5. 服务器收到HTTP报文后，处理请求，并返回HTTP响应报文给浏览器
6. 浏览器收到响应，解析响应体中的HTML代码，并渲染
7. 浏览器不需要和服务器通信时可以主动关闭TCP连接，或者等待服务器的关闭请求

### http https

+ 端口
    + http 80
    + https 443
+ 安全性和资源消耗
    + http运行在tcp之上，明文传输
    + https时运行在SSL/TLS之上的http，传输内容经过加密，消耗更多资源
+ SEO
    + 搜索引擎更青睐https，优先显示

### GET POST

+ 语义
    + GET用于获取或查询
    + POST用于创建或修改
+ 幂等
    + GET幂等，即多次重复执行不会改变资源的状态
    + POST非幂等，每次执行可能产生不同的结果，或影响资源的状态
+ 格式
    + GET放在URL中
    + POST放在请求体中，可以有多种编码格式

### WebSocket

+ 基于TCP的全双工通信协议，即客户端和服务器可以同时发送和接收数据
+ 客户端和服务器仅需一次握手，就可以持久连接，并双向数据传输
  应用场景
+ 弹幕
+ 实时消息推送
+ 社交聊天
+ 多用户编辑

#### 和http的区别

+ WebSocket双向实时通信协议，http单项通信协议， http只能由客户端发起
+ websocket使用ws://或wss://
+ websocket支持扩展，实现部分自定义的子协议，如压缩，加密
+ ws通信数据格式轻量，数据包头部相对小，网络开销小

### SSE

客户端请求，服务端不停发送

### TCP UDP

+ 是否面向连接
    + UDP在传送数据之前不需要先建立连接
    + TCP是提供面向连接的服务，传送数据前建立连接，结束后释放连接
+ 是否是可靠传输
    + UDP不可靠，不保证数据不丢失，不保证顺序到达
    + TCP传递之前三次握手建立连接，数据传递时由确认、窗口、重传、拥塞控制机制，保证数据的无差错、不丢失、不重复、按序到达
+ 是否有状态
    + UDP无状态服务
    + TCP会记录自己发消息的状态
+ 传输效率
    + TCP比UDP低很多
+ 传输形式
    + TCP面向字节流
    + UDP面向报文

|              |                |         |
|--------------|----------------|---------|  
|              | TCP            | 	UDP    |
| 是否面向连接	      | 是	             | 否       |
| 是否可靠	        | 是	             | 否       |
| 是否有状态        | 	是	            | 否       |
| 传输效率	        | 较慢             | 	较快     |
| 传输形式	        | 字节流	           | 数据报文段   |
| 首部开销	        | 20 ～ 60 bytes	 | 8 bytes |
| 是否提供广播或多播服务	 | 否	             | 是       |
#### 使用场景
+ UDP 即时通信
  + 语音、视频、直播等
+ TCP 传输准确性要求高的场景
  + 文件传输、邮件、远程登陆等